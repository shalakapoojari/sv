{% extends 'geasy/navbar.html' %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='geasy/css/styles.css') }}">
<title>User App Search Report</title>

<div class="page-container">
    <div class="page-header">
        <h1>User App Search Report</h1>
    </div>

    <div class="search-bar">
        <form method="POST" class="search-form">
            <p>Select User:</p>
            <select name="emp_id" class="form-control" required>
                <option value="">----</option>
                {% for user in users %}
                    <option value="{{ user.login_id}}">{{ user.login_id }} - {{ user.name }} - {{ user.city}}, {{ user.state }}</option>
                {% endfor %}
            </select>
            <p>Select Date:</p>
            <input type="date" name="search_date" class="form-control" required>
            <label class="checkbox-wrapper">
                <input type="checkbox" name="entire_month">
                <span>Entire Month</span>
            </label>
            <button type="submit" class="btn btn-primary">View Report</button>
        </form>
    </div>

    {% if report %}
        <div class="section-title">
            Search Results for {{ selected_user }} on {{ selected_date }}
            <span class="record-count">{{ report|length }} searches</span>
        </div>
        <div class="table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>S No</th>
                        <th>Date</th>
                        <th>Work/Chassis</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in report %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ entry.search_day }}</td>
                            <td>{{ entry.chasis_no }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% elif report is not none %}
        <div class="no-results">No searches found for this user on that day.</div>
    {% endif %}
</div>
{% endblock %}
